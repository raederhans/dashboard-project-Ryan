PREVIEW SERVER TEST — DRILLDOWN FIX VERIFICATION
Timestamp: 2025-10-20 22:01:32
URL: http://localhost:4173/

HTTP RESPONSE:
HTTP/1.1 200 OK
Vary: Origin
Content-Type: text/html
Cache-Control: no-cache
Etag: W/"2250-7Ig1tHjMnSKVpejYuXdnONIf7kM"
Date: Tue, 21 Oct 2025 02:07:39 GMT
Connection: keep-alive
Keep-Alive: timeout=5

SERVER OUTPUT:
> dashboard-project@0.0.0 preview
> vite preview

  ➜  Local:   http://localhost:4173/
  ➜  Network: use --host to expose

TEST STATUS: ✓ Server responded 200 OK
FIX APPLIED: src/api/crime.js:223 (endIso = end)
CACHE STATE: Fresh build clears all caches (LRU + sessionStorage)

EXPECTED BEHAVIOR (Manual verification required):
1. Switch to "Police District" query mode
2. Select any district (e.g., District 01)
3. Set time window to "12 months"
4. Select offense group: "Vehicle" or "Property"
5. EXPECTED: Drilldown list populates with offense codes
   - Vehicle: "Motor Vehicle Theft", "Theft from Vehicle"
   - Property: "Thefts"

DRILLDOWN API ENDPOINT TEST:
The fetchAvailableCodesForGroups() function now generates correct SQL:
  WHERE dispatch_date_time >= '2024-01-01'
    AND dispatch_date_time < '2025-01-01'  ← FIXED: Uses end date (not start)
